import streamlit as st
import pandas as pd

st.set_page_config(page_title="Day10 Streamlit", layout="wide")
st.title("ğŸ™ï¸ í”„ë¡œì íŠ¸ ì‹œì‘")
st.write("í´ë” ìƒì„± â†’ uv í™˜ê²½ ì„¸íŒ… â†’ ì‹¤í–‰ ì„±ê³µê¹Œì§€ ì™„ë£Œ!")
st.write("ì´ ë‚´ìš©ì´ ë³´ì¸ë‹¤ë©´ í™˜ê²½ì„¤ì • ì™„ë£Œ!")

# F1


í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ transactions
    def __init__í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ ( ë§¤ê°œë³€ìˆ˜ ì…ë ¥ ):
        self.dateì˜ ì´ˆê¸°ê°’ì€ ë§¤ê°œë³€ìˆ˜ dateì˜ ê°’ì´ ë“¤ì–´ê°„ë‹¤
        self.ttypeì˜ ì´ˆê¸°ê°’ì€ ë§¤ê°œë³€ìˆ˜ dateì˜ ê°’ì´ ë“¤ì–´ê°„ë‹¤
        self.categoryì˜ ì´ˆê¸°ê°’ì€ ë§¤ê°œë³€ìˆ˜ dateì˜ ê°’ì´ ë“¤ì–´ê°„ë‹¤
        self.descriptionì˜ ì´ˆê¸°ê°’ì€ ë§¤ê°œë³€ìˆ˜ dateì˜ ê°’ì´ ë“¤ì–´ê°„ë‹¤
        self.amountì˜ ì´ˆê¸°ê°’ì€ ë§¤ê°œë³€ìˆ˜ dateì˜ ê°’ì´ ë“¤ì–´ê°„ë‹¤
        > self.amount = int(e)

    def ë“±ë¡ ë²„íŠ¼ì— ê´€ë ¨í•œ í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ ():
        ifë¬¸ìœ¼ë¡œ, self.amount == int:
            pass 
        else :
            ê¸ˆì•¡ì€ ìˆ«ìê°€ ì•„ë‹™ë‹ˆë‹¤.
        ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê³ , ì—¬ê¸°ì— ê±°ë˜ ë‚´ìš©ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì…ë ¥
        list_test = []
        ë¹ˆ ë¦¬ìŠ¤íŠ¸ì— ë°ì´í„°ë¥¼ ë„£ëŠ”ë‹¤

        ë“±ë¡ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ì—ëŠ” í•˜ë‚˜ì˜ ê±°ë˜ê°€ ë“¤ì–´ê°„ë‹¤.
        í•´ë‹¹ ë‚´ìš©ì„ ê±°ë˜ ëª©ë¡ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•œë‹¤





# ë³€ìˆ˜ aë¥¼ ì„ ì–¸ , ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤
# ë³€ìˆ˜ aëŠ” ë‚ ìê°€ ë“¤ì–´ê°„ë‹¤
# ë³€ìˆ˜ bëŠ” ì§€ì¶œ ë˜ëŠ” ìˆ˜ì…ì— ê´€í•œ ë‚´ìš©ì´ ë“¤ì–´ê°„ë‹¤
# ë³€ìˆ˜ CëŠ” ì¹´í…Œê³ ë¦¬ì˜ ë‚´ìš©ì— ëŒ€í•´ ë“¤ì–´ê°„ë‹¤
# ë³€ìˆ˜ dëŠ” ë‚´ìš©ì— ëŒ€í•´ ë“¤ì–´ê°„ë‹¤
# ë³€ìˆ˜ eëŠ” ê¸ˆì•¡ì— ëŒ€í•´ ë“¤ì–´ê°„ë‹¤

# ê°ì²´ë¥¼ ìƒì„±í•œë‹¤




# F2 ì„í˜„ì„ë‹˜

ê±°ë˜ëª©ë¡ ì¡°íšŒ

Pythonì˜ Pandas ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê±°ë˜ ëª©ë¡(ë¦¬ìŠ¤íŠ¸)ì„ ë°ì´í„°í”„ë ˆì„(DataFrame) êµ¬ì¡°ë¡œ ë³€í™˜.
ë°ì´í„°í”„ë ˆì„ì˜ ì»¬ëŸ¼ëª…ì„ ìš”êµ¬ì‚¬í•­ì— ë§ì¶° ì„¤ì •:
    (ë‚ ì§œ, êµ¬ë¶„, ì¹´í…Œê³ ë¦¬, ë‚´ìš©, ê¸ˆì•¡)

IF ê±°ë˜ ëª©ë¡ì´ ë¹„ì–´ ìˆê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´:
    - í™”ë©´ì— â€œë“±ë¡ëœ ê±°ë˜ê°€ ì—†ìŠµë‹ˆë‹¤.â€ë¼ëŠ” ì•ˆë‚´ ë©”ì‹œì§€ë¥¼ ì¶œë ¥.
ELSE (ê±°ë˜ ëª©ë¡ì— ë°ì´í„°ê°€ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´):

Streamlitì˜ í‘œ ì¶œë ¥ ê¸°ëŠ¥(st.dataframe ë˜ëŠ” st.table)ì„ ì‚¬ìš©í•˜ì—¬ í™”ë©´ì— í‘œ ìƒì„±


    í´ë˜ìŠ¤ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ (self,a,b,c)
    def __init__(self,a,b,c):
        ê°ê° ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ê°’ì„ ì´ˆê¸°í™”í•œë‹¤
        ìˆ˜ì… í•©ê³„ì™€ ì§€ì¶œ í•©ê³„ë¥¼ ìœ„í•œ ë³€ìˆ˜ë¥¼ ì •ì˜í•œë‹¤
        input = 0
        output = 0

ë‚´ê°€ ìƒê°í–ˆë˜ ì´ˆê¸°ë‚´ìš©
ê³„ì‚°í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤ ()
    í˜„ì¬ ì”ì•¡ì„ ë³€ìˆ˜ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤
    ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì´ ìˆ˜ì…ì„ ë”í•œë‹¤
    ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì´ ì§€ì¶œì„ ë”í•œë‹¤
    ìˆ˜ì…ì˜ í•©, ì§€ì¶œì˜ í•©, í˜„ì¬ ì”ì•¡ì„ ë„˜ê²¨ì¤€ë‹¤
    ê°’ì„ ë°˜í™˜í•´ì¤€ë‹¤ ìˆ˜ì…, ì§€ì¶œ, (ìˆ˜ì…-ì§€ì¶œ)


í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ì„œ ë³€ìˆ˜ a,b,c ì— ë„£ì–´ì¤€ë‹¤
ë°›ì€ ê°’ë“¤ì„ ì¶œë ¥í•´ì¤€ë‹¤.


# F3

ìŠ¤íŠ¸ë¦¼ì„ stë¡œ ë¶€ë¥¸ë‹¤

ì¸ì»´ í•¨ìˆ˜
ì´ ìˆ˜ì… í•©ê³„ë¥¼ ë³€ìˆ˜ ì €ì¥
ìˆ˜ì…ì„ ë³€ìˆ˜ë¡œ ì €ì¥í•˜ê³  ìˆ˜ì…1= a ìˆ˜ì…2=b
add(a, b)
ë¦¬í„´ a+b
ë³€ìˆ˜ë¥¼ ì´ìš©í•´ í•©ê³„ ê³„ì‚°

ìµìŠ¤íœìŠ¤ í•¨ìˆ˜
ì´ì§€ì¶œ í•©ê³„ë¥¼ ë³€ìˆ˜ ì €ì¥
ì´ì§€ì¶œì„ ë³€ìˆ˜ë¡œ ì €ì¥í•˜ê³  (c, dë¡œ ë³€ìˆ˜ ì €ì¥)
add(c, d)
ë°˜í™˜ c+d
ë³€ìˆ˜ë¥¼ ì´ìš©í•´ í•©ê³„ ê³„ì‚°

ë°¸ëŸ°ìŠ¤ í•¨ìˆ˜
í˜„ì¬ ì”ì•¡(ìˆ˜ì…âˆ’ì§€ì¶œ)ì„ ê³„ì‚°í•œë‹¤.
sub(ìˆ˜ì… ë³€ìˆ˜, ì§€ì¶œ ë³€ìˆ˜)
return(ìˆ˜ì… ë³€ìˆ˜ â€“ ì§€ì¶œ ë³€ìˆ˜)

print ì¶œë ¥


# F4

csv ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤

df ë³€ìˆ˜ì— pd.datafreamì„ ì´ìš©í•´ ì €ì¥í•œë‹¤

íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤
    íŒŒì¼ì—ì„œ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ b ë³€ìˆ˜ë¥¼ ë§Œë“ ë‹¤

    ë§Œì•½ csvíŒŒì¼ì´ ì¡´ì¬í•˜ë©´
        íŒŒì¼ì„ ì—´ì–´ ë°ì´í„°ë¥¼ ì½ì–´ì˜¨ë‹¤ (ì£¼ì˜ ì—¬ê¸°ì„œ ì‚¬ìš© í›„ ë‹«ì•„ì•¼í•¨)
        b ë³€ìˆ˜ì— ë°ì´í„°ë¥¼ ë„£ëŠ”ë‹¤
        bë¥¼ ë°˜í™˜í•œë‹¤
    ë§Œì•½ csvíŒŒì¼ì´ ì—†ë‹¤ë©´
        b ë³€ìˆ˜ëŠ” ë°ì´í„°ê°€ ì—†ë‹¤
        bë¥¼ ë°˜í™˜í•œë‹¤.

ê±°ë˜ ë“±ë¡í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤()
    ìƒˆë¡œìš´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ a ë³€ìˆ˜ ë¥¼ ì •ì˜í•œë‹¤
    
    ì¡°ê±´ë¬¸_ ì‚¬ìš©ìê°€ ê±°ë˜ë¥¼ ë“±ë¡ í•˜ë©´
        a ë³€ìˆ˜ì— ë“±ë¡í•œ ë‚´ìš©ë“¤ì„ ì§‘ì–´ ë„£ëŠ”ë‹¤
        ê·¸ ì´í›„ ì—´ì—ˆë˜ íŒŒì¼ì— ë®ì–´ì“°ê¸°ë¡œ ì €ì¥í•œë‹¤
        ì €ì¥ì‹œ date,type,category,description,amount ìˆœìœ¼ë¡œë„£ëŠ”ë‹¤
        ë³€ìˆ˜ì— ê³µë°±ì œê±°, ','ë¡œ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ strip() í•¨ìˆ˜ì™€ join()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤
        save_transactions() -> ë°ì´í„° ì €ì¥


# F5

test = transactions(ì¸ìë¥¼ ë³´ëƒ„) < ê°ì±„ìƒì„±

í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤. í•¨ìˆ˜ëª…ì€ ì„ì˜ë¡œ output (ë§¤ê°œë³€ìˆ˜ëŠ” ê°ì²´)
ë§Œì•½ test.ttype == "ì§€ì¶œ"ì¸ ê²½ìš°
    ë³€ìˆ˜ a , bë¥¼ ì´ˆê¸°í™”í•œë‹¤
    ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ í‚¤ì™€ ê°’ì„ ì¶”ì¶œí•œë‹¤, ì¢…ë¥˜ë‘, ê°’ì„ ì¶”ì¶œí•œë‹¤
        ë³€ìˆ˜ a,bì— ê°ê° í‚¤ì™€ ê°’ì„ ë„£ëŠ”ë‹¤
    a,bë³€ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤ return a,b

date_test = output(test)
st.bar_chart(date_test)
ë¥¼ ì´ìš©í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì´ìš©í•´ í–‰ì€ ì¢…ë¥˜, ê·¸ë˜í”„ëŠ” ê°€ê²©ìœ¼ë¡œ ì¶œë ¥í•œë‹¤